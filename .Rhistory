sp2 <- vertsearch("Cachryx defensor")
sp2
class(sp2)
names(sp2)
sp2$data
class(sp2$data)
names(sp2$data)
names(sp2$meta)
vm <- vertmap(sp2)
vm <- vertmap("Cachryx defensor")
sp2 <- vertsearch("Ctenosaura similis")
vm <- vertmap(sp2)
vm
library(rvertnet)
sp2 <- vertsearch("Cachryx defensor")
vm <- vertmap(sp3)
sp3 <- vertsearch("Ctenosaura similis")
vm <- vertmap(sp3)
vertmap(sp3)
vertmap(sp3)
names(sp3$data)
sp3$data$decimallongitude
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude"))
names(sp3$data)
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude", "scientificname"))
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude"),
scientificname %in% c("Ctenosaura similis", "CTENOSAURA SIMILIS"))
xy.3
install.packages("redlistr")
library(redlistr)
install.packages("taxize")
library(taxize)
bc <- get_iucn("Branta canadensis")
bc <- get_iucn("Branta canadensis", key = NULL)
install.packages("rredlist")
library(rredlist)
knitr::opts_chunk$set(echo = TRUE)
library(terra)
py <- vect("Datos/Peninsula.gpkg")
py
py@ptr
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
proj4string(py)
crs(py)
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.csv)
crs(cd.gpkg)
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("Tutorial-aplicaciones/Proyeccion.png", dpi = 150)
knitr::include_graphics("Tutorial-aplicaciones/EPSG-dialogo.png", dpi = 200)
knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("Tutorial-aplicaciones/ITRF2008.png", dpi = 200)
knitr::include_graphics("Tutorial-aplicaciones/ITRF2008-16N.png", dpi = 200)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
cd.v.itrf <- project(cd.v.itrf, crs("EPSG:6363"))
cd.v.itrf <- project(cd.v.itrf, x = "EPSG:6363")
cd.v.itrf <- project(cd.v.itrf, "EPSG:6363")
cd.v.itrf <- project(cd.v, "EPSG:6363")
cd.v.it <- project(cd.v, "EPSG:6363")
py.it <- project(py, "EPSG:6363")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:4481")
py.it <- project(py, "EPSG:4481")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
knitr::opts_chunk$set(echo = TRUE)
install.packages("rdryad")
library(rdryad)
dryad_files_download(ids = "dryad.bp26v20")
dryad_files_download(ids = 10.5061)
id.dryad <- dryad_dataset(dois = "https://doi.org/10.5061/dryad.bp26v20")
id.dryad
dryad_files_download(ids = id.dryad)
id.dryad <- dryad_dataset(dois = "10.5061/dryad.bp26v20")
id.dryad
id.dryad$`10.5061/dryad.bp26v20`$id
dryad_files_download(ids = id)
id <- id.dryad$`10.5061/dryad.bp26v20`$id
dryad_files_download(ids = id)
dryad_files(ids = id)
id.dryad$`10.5061/dryad.bp26v20`$`_links`
id.dryad$`10.5061/dryad.bp26v20`$storageSize
knitr::include_graphics("Tutorial-GBIF/DOIs.png", dpi = 200)
dryad_files_download(ids = id)
f <- list.files("../Current/", pattern = ".tif", full.names = T)
f <- list.files("../Current/", pattern = ".tif", full.names = T)
length(f)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
plot(r[[1]])
plot(r[[100]])
plot(r[[400]])
plot(r[[400]])
riq <- sum(r)
plot(riq)
dim(riq)
riq <- sum(r)
plot(riq)
??wrld_simpl
data(wrld_simpl)
library(maptools)
data("wrld_simpl")
data("wrld_simpl")
plot(wrld_simpl)
m <- vect(wrld_simpl)
plot(m)
detach("package:maptools", unload = TRUE)
data("wrld_simpl")
m <- vect(wrld_simpl)
plot(m)
riq.ter <- mask(riq, m)
crs(riq)
crs(m)
m <- project(m, "EPSG:4326")
plot(m)
riq.ter <- mask(riq, m)
riq <- project(riq, "EPSG:4326")
riq.ter <- mask(riq, m)
plot(riq.ter)
riq.df <- as.data.frame(riq, xy = T)
riq.df <- as.data.frame(riq, xy = T)
knitr::kable(head(riq.df))
riq.df$sum <- round(riq.df, 0)
knitr::kable(head(riq.df))
riq.df <- as.data.frame(riq, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
knitr::opts_chunk$set(echo = TRUE)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
knitr::include_graphics("Tutorial-aplicaciones/Proyeccion.png", dpi = 150)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
riq <- sum(r)
plot(riq)
plot(riq)
knitr::opts_chunk$set(echo = TRUE)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
riq <- sum(r)
plot(riq)
library(maptools)
data("wrld_simpl")
m <- vect(wrld_simpl)
m <- project(m, "EPSG:4326")
plot(m)
riq <- project(riq, "EPSG:4326")
riq.ter <- mask(riq, m.ea)
riq.ter <- mask(riq, m)
plot(riq.ter)
bio <- rast(paste0("../Current/bio",c(1, 7, 12), ".tif"))
bio.res <- resample(bio, riq, method = "lanczos")
bio.res <- mask(bio.res, m)
plot(bio.res)
plot(m)
riq.df <- as.data.frame(riq, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
riq.88 <- project(riq.ter, "EPSG:8857")
bio.88 <- project(bio.res, "EPSG:8857")
rast(bio.88, riq.88)
c(bio.88, riq.88)
todos <- c(bio.88, riq.88)
riq.df <- as.data.frame(riq.88, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
todos <- c(bio.88, riq.88)
riq.df <- as.data.frame(todos, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
library(ggplo2)
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))+
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum))+
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum))+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 + y = sum), method = "gam") +
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum)) +
geom_smooth(aes(x = bio7 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum)) +
geom_smooth(aes(x = bio12 , y = sum), method = "gam")+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum)) +
geom_smooth(aes(x = bio7 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum)) +
geom_smooth(aes(x = bio12 , y = sum), method = "gam")+
labs(y = "Riqueza")
m1 <- glm(sum ~ bio1 + bio7 + I(bio7^2) +
bio12 + I(bio12^2),
data = riq.df, family = "poisson")
m1 <- glm(sum ~ bio1 + bio7 + I(bio7^2) +
bio12 + I(bio12^2),
data = riq.df, family = "poisson")
summary(m1)
p <- predict(m1)
riq.df$pred.riq <- p
riq.pred <- rast(riq.df)
plot(riq.pred[["pred.riq"]])
library(dismo); library(terra); library(rgdal); library(maptools)
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
brad.p
brad.sp <- brad.p
coordinates(brad.sp) <- ~ lon+lat
brad.sp <- vect(brad.sp)
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.p$lon, brad.p$lat)
plot(buf, add = T)
buf <- rgeos::gBuffer(brad.sp, byid = F, width = 10)
buf <- buffer(brad.sp, byid = F, width = 10)
buf <- buffer(brad.sp, width = 10)
plot(bur)
plot(buf)
buf <- buffer(brad.sp, width = 100)
plot(buf)
buf <- buffer(brad.sp, width = 1000)
plot(buf)
buf <- buffer(brad.sp, width = 10000)
plot(buf)
buf <- buffer(brad.sp, width = 100000)
plot(buf)
buf <- buffer(brad.sp, width = 1000000)
plot(buf)
buf <- buffer(brad.sp, width = 500000)
plot(buf)
buf <- buffer(brad.sp, width = 1000000)
plot(buf)
buf <. union(buf)
buf <- union(buf)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.p$lon, brad.p$lat)
plot(buf, add = T)
capas.rm <- crop(mask(capas.r, buf), extent(buf))
crs(capas.r)
capas.r <- project(capas.r, "EPSG:4326")
plot(capas.r)
buf <- project(buf, "EPSG:4326")
capas.rm <- crop(mask(capas.r, buf), extent(buf))
capas.rm <- crop(mask(capas.r, buf), buf)
plot(capas.rm[[1]])
points(brad.sp)
pres.r <- rasterize(brad.sp, capas.rm[[1]], fun = "count")
pres.r[[1]][is.na(pres.r[[1]][])] <- 0
pres.r <- mask(pres.r[[1]], capas.rm[[1]])
plot(pres.r)
capas.rm <- c(capas.rm, pres.r)
capas.df <- as.data.frame(capas.rm)
wt <- rep(1.0E-6, nrow(capas.df))
names(capas.df)
capas.df <- as.data.frame(capas.rm, xy = T)
wt <- rep(1.0E-6, nrow(capas.df))
wt[capas.df$ID == 0] = length(wt)/sum(capas.df$count == 0)
modelo <- glm(ID/wt ~ bio1 + bio12 + bio7 +
I(bio1^2) + I(bio12^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
modelo <- glm(count/wt ~ bio1 + bio12 + bio7 +
I(bio1^2) + I(bio12^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
modelo.1 <- glm(ID/wt ~ bio1 + bio16 + bio17 + bio7 +
I(bio1^2) + I(bio16^2)+ I(bio17^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
modelo.1 <- glm(count/wt ~ bio1 + bio16 + bio17 + bio7 +
I(bio1^2) + I(bio16^2)+ I(bio17^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
mod.step <- step(modelo.1)
summary(mod.step)
pred.modelo <- exp(predict(mod.step))
pred.r <- rasterFromXYZ(data.frame(capas.df[, c("x", "y")], pred.modelo))
plot(pred.r)
pred.r <- rast(data.frame(capas.df[, c("x", "y")], pred.modelo))
plot(pred.r)
points(brad.sp, pch = 20, cex = 0.1)
fav.pres <- extract(pred.r, brad.sp)
umbral <- quantile(fav.pres, 0.05)
fav.pres <- extract(pred.r, brad.sp)
fav.pres
umbral <- quantile(fav.pres$pred.modelo, 0.05)
umbral
plot(pred.r > umbral); points(brad.sp)
brad.sp <- vect(brad.p[, c("lon", "lat")])
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
library(dismo); library(terra)
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
brad.sp <- vect(brad.p[, c("lon", "lat")])
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
buf <- buffer(brad.sp, width = 1000000)
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
brad.sp <- vect(brad.p[, c("lon", "lat")])
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
mundo <- project(mundo, "EPSG:8857")
capas.r <- project(capas.r, "EPSG:8857")
brad.sp <- project(brad.sp, "ESPG:8857")
buf <- buffer(brad.sp, width = 1000000)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.p$lon, brad.p$lat)
plot(buf, add = T)
plot(capas.r[[1]]); points(brad.sp)
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
brad.sp <- project(brad.sp, "ESPG:8857")
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
system.file(package="dismo")
paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
brad.sp <- vect(brad.p[, c("lon", "lat")])
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
mundo <- project(mundo, "EPSG:8858")
capas.r <- project(capas.r, "EPSG:8858")
brad.sp <- project(brad.sp, "ESPG:8858")
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
plot(capas.r[[1]])
points(brad.sp)
mundo <- project(mundo, "ESRI:54034")
plot(mundo)
mundo <- project(mundo, "IAU_2015:39985")
plot(mundo)
mundo <- project(mundo, "IAU_2015:39986")
plot(mundo)
mundo <- project(mundo, "ESRI:56036")
mundo <- project(mundo, "ESRI:53036")
plot(mundo)
mundo$SUBREGION
mundo$UN
mundo$ISO2
mundo$ISO3
mundo$
mundo <- project(mundo, "ESRI:53036")
mundo$FIPS
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
plot(capas.})
plot(capas.r)
brad.f <- paste(system.file(package="dismo"), "/ex/bradypus.csv", sep="")
brad.p <- read.csv(brad.f)
brad.sp <- vect(brad.p[, c("lon", "lat")])
mundo <- vect("Datos/Mundo.gpkg")
plot(mundo)
crs(brad.sp) <- crs(mundo)
capas.f <- list.files(path=paste(system.file(package="dismo"), '/ex',
sep=''), pattern='grd', full.names=TRUE )
capas.r <- rast(capas.f)
par(mar = c(1,1,1,1))
plot(capas.r[[1]])
points(brad.sp)
mundo <- project(mundo, "ESRI:53036")
plot(mundo)
pro <- "ESRI:53036"
mundo <- project(mundo, pro)
plot(mundo)
capas.r <- project(capas.r, pro)
plot(capas.r)
brad.sp <- project(brad.sp, pro)
buf <- buffer(brad.sp, width = 1000000)
par(mar = c(1,1,1,1))
plot(capas.r[[1]]); points(brad.sp)
plot(buf, add = T)
capas.rm <- crop(mask(capas.r, buf), buf)
plot(capas.rm[[1]])
points(brad.sp)
pres.r <- rasterize(brad.sp, capas.rm[[1]], fun = "count")
pres.r[[1]][is.na(pres.r[[1]][])] <- 0
pres.r <- mask(pres.r[[1]], capas.rm[[1]])
plot(pres.r)
capas.rm <- c(capas.rm, pres.r)
capas.df <- as.data.frame(capas.rm, xy = T)
wt <- rep(1.0E-6, nrow(capas.df))
wt[capas.df$ID == 0] = length(wt)/sum(capas.df$count == 0)
modelo <- glm(count/wt ~ bio1 + bio12 + bio7 +
I(bio1^2) + I(bio12^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
modelo.1 <- glm(count/wt ~ bio1 + bio16 + bio17 + bio7 +
I(bio1^2) + I(bio16^2)+ I(bio17^2) + I(bio7^2),
data = capas.df, weights = wt,
family = poisson())
mod.step <- step(modelo.1)
summary(mod.step)
pred.modelo <- exp(predict(mod.step))
pred.r <- rast(data.frame(capas.df[, c("x", "y")], pred.modelo))
plot(pred.r)
points(brad.sp, pch = 20, cex = 0.1)
fav.pres <- extract(pred.r, brad.sp)
umbral <- quantile(fav.pres$pred.modelo, 0.05)
plot(pred.r > umbral); points(brad.sp)
