grad <- 0:2000
s <- sample(grad, 100)
hist(s)
s <- sample(grad, 100)
hist(s)
s <- sample(grad, 100)
hist(s)
for(i in 1:100){
s1 <- sample(grad, 100)
s <- cbind(s, s1)
}
ncol(s)
for(i in 1:101){
d <- density(s[, i])
}
for(i in 1:101){
d[[i]] <- density(s[, i])
}
plot(d[[1]])
d[[1]]$x
d[[2]]$x
d <- list()
for(i in 1:101){
d[[i]] <- density(s[, i], n = 200)
}
plot(d[[1]])
d[[2]]$x
for(i in 1:101){
d[[i]] <- density(s[, i], n = 200,
cut = c(0, 2000))
}
for(i in 1:101){
d[[i]] <- density(s[, i], n = 200,
from = 0, to = 2000)
}
plot(d[[1]])
d[[2]]$x
for(i in 2,:101){
plot(d[[1]])
for(i in 2,:101){
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$x)
}
d[[i]]$x
plot(d[[1]])
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y)
}
plot(d[[1]], ylim = c(0, 7e-04))
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y)
}
plot(d[[1]], ylim = c(0, 7e-04))
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y, col = "grey")
}
lines(d[[1]]$x, d[[1]]$y)
plot(d[[1]], ylim = c(0, 7e-04), main = "Especies en gradiente elevacional",
x = "Elevación", y = "Frecuencia")
plot(d[[1]], ylim = c(0, 7e-04), main = "Especies en gradiente elevacional",
xlab = "Elevación", ylab = "Frecuencia")
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y, col = "grey")
}
lines(d[[1]]$x, d[[1]]$y)
pdf("Simulation-elevacion.png", width = 500, height = 300)
plot(d[[1]], ylim = c(0, 7e-04), main = "Especies en gradiente elevacional",
xlab = "Elevación", ylab = "Frecuencia")
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y, col = "grey")
}
lines(d[[1]]$x, d[[1]]$y)
dev.off()
png("Simulation-elevacion.png", width = 500, height = 300)
plot(d[[1]], ylim = c(0, 7e-04), main = "Especies en gradiente elevacional",
xlab = "Elevación", ylab = "Frecuencia")
for(i in 2:101){
lines(d[[i]]$x, d[[i]]$y, col = "grey")
}
lines(d[[1]]$x, d[[1]]$y)
dev.off()
knitr::opts_chunk$set(echo = TRUE)
library(dismo)
sp <- gbif(genus = "Leopardus", species = "wiedii")
library(dismo)
sp <- gbif(genus = "Cachryx", species = "defensor")
class(sp)
head(sp)
dim(tabla)
dim(sp)
names(sp)
sp$lon
knitr::kable(head(sp[, c("lon", "lat")]))
knitr::kable(head(sp[, c("lon", "lat")]))
knitr::kable(tail(sp[, c("lon", "lat")]))
xy <- subset(sp, c("lon", "lat"))
xy <- subset(sp, select = c("lon", "lat"))
xy
which(!is.unique(prod))
which(prod %in% unique(prod))
unique(prod)
prod
prod <- with(sp, lon * lat)
prod
which(prod %in% unique(prod))
p <- with(sp, lon * lat)
unicos <- unique(p)
unicos
length(unicos)
p <- with(xy.na, lon * lat)
xy <- subset(sp, select = c("lon", "lat"))
xy.na <- na.omit(xy)
p <- with(xy.na, lon * lat)
unicos <- unique(p)
unicos
xy.unicos <- unique(xy.na)
dim(xy.unicos)
library(terra)
library(terra)
v <- vect("Datos/Peninsula.gpkg")
?over
over(xy.unicos, v)
library(rgdal)
v <- readOGR("Datos/Peninsula.gpkg")
over(xy.unicos, v)
over(xy.unicos[, c("lon", "lat")], v)
v <- vect("Datos/Peninsula.gpkg") #Importando área de estudio
coordinates(xy.unicos) <- ~ lon + lat
over(xy.unicos, v)
over(v, xy.unicos)
knitr::opts_chunk$set(echo = TRUE)
library(dismo)
sp <- gbif(genus = "Cachryx", species = "defensor")
class(sp)
xy <- subset(sp, select = c("lon", "lat"))
xy.na <- na.omit(xy)
p <- with(xy.na, lon * lat)
xy.na$p <- p
xy.unicos <- unique(xy.na)
dim(xy.unicos)
library(terra)
v <- vect("Datos/Peninsula.gpkg") #Importando área de estudio
terra::extract(v, xy.unicos)
coordinates(xy.s) <- ~ lon + lat
xy.s <- xy.unicos
coordinates(xy.s) <- ~ lon + lat
terra::extract(v, xy.s)
xy.s <- as.points(xy.s)
xy.s <- as.points(xy.unicos[, c("lat", "lon")])
xy.s <- vect(xy.unicos[, c("lat", "lon")])
terra::extract(v, xy.s)
plot(v)
points(xy.s)
e <- terra::extract(v, xy.s)
e
e$GID_0
e.na <- which(!is.na(e$GID_0))
xy.corr <- xy.unicos[e.na, ]
plot(v); points(xy.corr[, c("lon", "lat")])
library(terra)
v <- vect("Datos/Peninsula.gpkg") #Importando área de estudio
xy.s <- vect(xy.unicos[, c("lat", "lon")])
plot(v); points(xy.s)
e <- terra::extract(v, xy.s)
e.na <- which(!is.na(e$GID_0))
xy.corr <- xy.unicos[e.na, ]
plot(v); points(xy.corr[, c("lon", "lat")], pch = 20)
writeVector(vect(xv.corr[, c("lon", "lat")]), filename = "Datos/Cachryx", filetype = "GPKG")
writeVector(vect(xy.corr[, c("lon", "lat")]), filename = "Datos/Cachryx", filetype = "GPKG")
knitr::opts_chunk$set(echo = TRUE)
library(dismo)
knitr::include_graphics("Examen-Macro-patrones/world.svg", dpi = 300)
knitr::include_graphics("Examen-Macro-patrones/mundo.png", dpi = 300)
knitr::include_graphics("mundo.png", dpi = 300)
knitr::include_graphics("mundo.png", dpi = 600)
knitr::include_graphics("mundo.png", dpi = 300)
knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("Tutorial-GBIF/01.png", dpi = 200)
knitr::include_graphics("Tutorial-GBIF/02.png", dpi = 200)
knitr::include_graphics("Tutorial-GBIF/03.png", dpi = 200)
knitr::include_graphics("Tutorial-GBIF/04.png", dpi = 200)
names(sp1)
knitr::opts_chunk$set(echo = TRUE)
library(rinat)
sp1 <- get_inat_obs(taxon_name = "Cachryx defensor")
names(sp1)
xy.1 <- subset(sp1, selec = c("longitude", "latitude"))
library(terra)
v <- vect("Datos/Peninsula.gpkg") #Importando área de estudio
plot(v); points(xy.1, pch = 20)
plot(v); points(xy.1, pch = 20)
install.packages("rvertnet")
library(rvertnet)
sp1 <- vertsearch("Chachryx defensor")
library(rvertnet)
sp1 <- vertsearch("Cachryx defensor")
sp2 <- vertsearch("Cachryx defensor")
sp2
class(sp2)
names(sp2)
sp2$data
class(sp2$data)
names(sp2$data)
names(sp2$meta)
vm <- vertmap(sp2)
vm <- vertmap("Cachryx defensor")
sp2 <- vertsearch("Ctenosaura similis")
vm <- vertmap(sp2)
vm
library(rvertnet)
sp2 <- vertsearch("Cachryx defensor")
vm <- vertmap(sp3)
sp3 <- vertsearch("Ctenosaura similis")
vm <- vertmap(sp3)
vertmap(sp3)
vertmap(sp3)
names(sp3$data)
sp3$data$decimallongitude
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude"))
names(sp3$data)
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude", "scientificname"))
xy.3 <- subset(sp3$data, select = c("decimallatitude", "decimallongitude"),
scientificname %in% c("Ctenosaura similis", "CTENOSAURA SIMILIS"))
xy.3
install.packages("redlistr")
library(redlistr)
install.packages("taxize")
library(taxize)
bc <- get_iucn("Branta canadensis")
bc <- get_iucn("Branta canadensis", key = NULL)
install.packages("rredlist")
library(rredlist)
knitr::opts_chunk$set(echo = TRUE)
library(terra)
py <- vect("Datos/Peninsula.gpkg")
py
py@ptr
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
proj4string(py)
crs(py)
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.csv)
crs(cd.gpkg)
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("Tutorial-aplicaciones/Proyeccion.png", dpi = 150)
knitr::include_graphics("Tutorial-aplicaciones/EPSG-dialogo.png", dpi = 200)
knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("Tutorial-aplicaciones/ITRF2008.png", dpi = 200)
knitr::include_graphics("Tutorial-aplicaciones/ITRF2008-16N.png", dpi = 200)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
cd.v.itrf <- project(cd.v.itrf, crs("EPSG:6363"))
cd.v.itrf <- project(cd.v.itrf, x = "EPSG:6363")
cd.v.itrf <- project(cd.v.itrf, "EPSG:6363")
cd.v.itrf <- project(cd.v, "EPSG:6363")
cd.v.it <- project(cd.v, "EPSG:6363")
py.it <- project(py, "EPSG:6363")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:4481")
py.it <- project(py, "EPSG:4481")
plot(py.it); points(cd.v.it)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
knitr::opts_chunk$set(echo = TRUE)
install.packages("rdryad")
library(rdryad)
dryad_files_download(ids = "dryad.bp26v20")
dryad_files_download(ids = 10.5061)
id.dryad <- dryad_dataset(dois = "https://doi.org/10.5061/dryad.bp26v20")
id.dryad
dryad_files_download(ids = id.dryad)
id.dryad <- dryad_dataset(dois = "10.5061/dryad.bp26v20")
id.dryad
id.dryad$`10.5061/dryad.bp26v20`$id
dryad_files_download(ids = id)
id <- id.dryad$`10.5061/dryad.bp26v20`$id
dryad_files_download(ids = id)
dryad_files(ids = id)
id.dryad$`10.5061/dryad.bp26v20`$`_links`
id.dryad$`10.5061/dryad.bp26v20`$storageSize
knitr::include_graphics("Tutorial-GBIF/DOIs.png", dpi = 200)
dryad_files_download(ids = id)
f <- list.files("../Current/", pattern = ".tif", full.names = T)
f <- list.files("../Current/", pattern = ".tif", full.names = T)
length(f)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
plot(r[[1]])
plot(r[[100]])
plot(r[[400]])
plot(r[[400]])
riq <- sum(r)
plot(riq)
dim(riq)
riq <- sum(r)
plot(riq)
??wrld_simpl
data(wrld_simpl)
library(maptools)
data("wrld_simpl")
data("wrld_simpl")
plot(wrld_simpl)
m <- vect(wrld_simpl)
plot(m)
detach("package:maptools", unload = TRUE)
data("wrld_simpl")
m <- vect(wrld_simpl)
plot(m)
riq.ter <- mask(riq, m)
crs(riq)
crs(m)
m <- project(m, "EPSG:4326")
plot(m)
riq.ter <- mask(riq, m)
riq <- project(riq, "EPSG:4326")
riq.ter <- mask(riq, m)
plot(riq.ter)
riq.df <- as.data.frame(riq, xy = T)
riq.df <- as.data.frame(riq, xy = T)
knitr::kable(head(riq.df))
riq.df$sum <- round(riq.df, 0)
knitr::kable(head(riq.df))
riq.df <- as.data.frame(riq, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
knitr::opts_chunk$set(echo = TRUE)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
crs(py, describe = T)
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
crs(cd.gpkg, describe = T)
crs(cd.gpkg) <- crs(py)
crs(cd.gpkg, describe = T)
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
knitr::include_graphics("Tutorial-aplicaciones/Proyeccion.png", dpi = 150)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
riq <- sum(r)
plot(riq)
plot(riq)
knitr::opts_chunk$set(echo = TRUE)
library(terra); library(tidyr)
py <- vect("Datos/Peninsula.gpkg")
py |> as.data.frame()
cd.csv <- read.csv("Datos/Cachryx.csv")
cd.gpkg <- vect("Datos/Cachryx.csv")
cd.v <- vect(cd.csv)
crs(cd.v) <- crs(py)
crs(cd.v, describe = T)
cd.v.it <- project(cd.v, "EPSG:6371")
py.it <- project(py, "EPSG:6371")
plot(py.it); points(cd.v.it)
f <- list.files("../Current/Current/", pattern = ".tif", full.names = T)
length(f)
r <- rast(f)
riq <- sum(r)
plot(riq)
library(maptools)
data("wrld_simpl")
m <- vect(wrld_simpl)
m <- project(m, "EPSG:4326")
plot(m)
riq <- project(riq, "EPSG:4326")
riq.ter <- mask(riq, m.ea)
riq.ter <- mask(riq, m)
plot(riq.ter)
bio <- rast(paste0("../Current/bio",c(1, 7, 12), ".tif"))
bio.res <- resample(bio, riq, method = "lanczos")
bio.res <- mask(bio.res, m)
plot(bio.res)
plot(m)
riq.df <- as.data.frame(riq, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
riq.88 <- project(riq.ter, "EPSG:8857")
bio.88 <- project(bio.res, "EPSG:8857")
rast(bio.88, riq.88)
c(bio.88, riq.88)
todos <- c(bio.88, riq.88)
riq.df <- as.data.frame(riq.88, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
todos <- c(bio.88, riq.88)
riq.df <- as.data.frame(todos, xy = T)
riq.df$sum <- round(riq.df$sum, 0)
knitr::kable(head(riq.df))
library(ggplo2)
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))+
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum))+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum))+
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum))+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 + y = sum), method = "gam") +
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum)) +
geom_smooth(aes(x = bio7 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum)) +
geom_smooth(aes(x = bio12 , y = sum), method = "gam")+
labs(y = "Riqueza")
library(ggplot2)
ggplot(riq.df) + geom_point(aes(x = bio1, y = sum)) +
geom_smooth(aes(x = bio1 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio7, y = sum)) +
geom_smooth(aes(x = bio7 , y = sum), method = "gam") +
labs(y = "Riqueza")
ggplot(riq.df) + geom_point(aes(x = bio12, y = sum)) +
geom_smooth(aes(x = bio12 , y = sum), method = "gam")+
labs(y = "Riqueza")
m1 <- glm(sum ~ bio1 + bio7 + I(bio7^2) +
bio12 + I(bio12^2),
data = riq.df, family = "poisson")
m1 <- glm(sum ~ bio1 + bio7 + I(bio7^2) +
bio12 + I(bio12^2),
data = riq.df, family = "poisson")
summary(m1)
p <- predict(m1)
riq.df$pred.riq <- p
riq.pred <- rast(riq.df)
plot(riq.pred[["pred.riq"]])
